---
title: 【美团面试】不开辟新的内存空间实现数组去重
date: 2017-08-20 16:12:25
tags:
- 面试
- 前端
categories: 前端
---

美团内推面试的一道题。如果没有变量限制，方法很多很多，这里面试官要求不要定义新的引用型变量
其实吧，只是不开辟一个对象或数组变量。用splice修改自身：

```javascript
function fn(resArr){
    for (var i=0;i<resArr.length;i++){
    if(resArr.indexOf(resArr[i])!==i){
      resArr.splice(i,1);//利用splice删除第二次出现的值，
	  i--;//重要！！原始数组倍删除某个元素后，后续元素索引进一，若想继续遍历，则索引-1
    }
  }
  return resArr;
}
```

另外面试官还问了写 缓存相关的，从磁盘缓存和304缓存的区别，为什么要同时用新鲜值和校验值双重验证。面试整体难度一般吧，但是面试官容易问到比较偏的点，所以主导聊天内容很重要。

----

另外整理下缓存相关的知识：
目前主流的浏览器缓存分为两类，强缓存和协商缓存，它们的匹配流程如下：

<!--more-->

（1）浏览器发送请求前，根据请求头的expires和cache-control判断是否命中强缓存策略，如果命中，直接从缓存获取资源，并不会发送请求。如果没有命中，则进入下一步。

（2）没有命中强缓存规则，浏览器会发送请求，根据请求头的last-modified和etag判断是否命中协商缓存，如果命中，直接从缓存获取资源。如果没有命中，则进入下一步。

（3）如果前两步都没有命中，则直接从服务端获取资源。

可以参考这篇文章：[《你应该知道的浏览器缓存知识 - 知乎专栏》](https://zhuanlan.zhihu.com/p/26029992)

chrome中，本地缓存还分为

-	from disk cache 磁盘缓存
-	from memory cache 内存缓存

